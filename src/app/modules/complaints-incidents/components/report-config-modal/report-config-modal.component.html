<div class="p-0 min-w-[600px] font-sans bg-gray-100 rounded-2xl overflow-hidden shadow-3xl max-h-[90vh] flex flex-col">
  <div class="bg-gradient-to-br from-purple-900 to-indigo-950 text-white p-4 rounded-t-2xl flex flex-col items-center justify-center relative overflow-hidden flex-shrink-0">
    <div class="absolute inset-0 bg-pattern-dots opacity-10"></div>
    <div class="flex items-center space-x-4 mb-2 z-10">
      <svg class="w-16 h-16 text-purple-300 drop-shadow-lg" fill="none" stroke="currentColor" stroke-width="1.5" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
      </svg>
      <h2 class="text-3xl font-bold tracking-wide text-shadow-lg">Configurar Reporte Personalizado</h2>
    </div>
    <div class="text-lg font-semibold opacity-95 flex items-center space-x-2 z-10">
      <span class="text-purple-100">Personaliza tu reporte de incidencias</span>
    </div>
  </div>

  <div class="p-6 bg-white rounded-b-2xl border border-gray-200 overflow-y-auto flex-grow">
    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
      
      <!-- Left Column -->
      <div class="space-y-6">
        <!-- Date Range -->
        <div class="bg-white p-4 rounded-xl shadow-md border border-gray-100">
          <h3 class="text-lg font-bold text-gray-700 mb-3">Rango de Fechas</h3>
          <div class="space-y-3">
            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Fecha Desde</mat-label>
              <input matInput [matDatepicker]="dateFromPicker" [(ngModel)]="config.dateFrom">
              <mat-datepicker-toggle matSuffix [for]="dateFromPicker"></mat-datepicker-toggle>
              <mat-datepicker #dateFromPicker></mat-datepicker>
            </mat-form-field>
            
            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Fecha Hasta</mat-label>
              <input matInput [matDatepicker]="dateToPicker" [(ngModel)]="config.dateTo">
              <mat-datepicker-toggle matSuffix [for]="dateToPicker"></mat-datepicker-toggle>
              <mat-datepicker #dateToPicker></mat-datepicker>
            </mat-form-field>
          </div>
        </div>

        <!-- Severity Filters -->
        <div class="bg-white p-4 rounded-xl shadow-md border border-gray-100">
          <h3 class="text-lg font-bold text-gray-700 mb-3">Severidad</h3>
          <div class="space-y-2">
            <mat-checkbox 
              *ngFor="let severity of severityOptions" 
              [checked]="isSelected(config.severities, severity.value)"
              (change)="onSeverityChange(severity.value, $event.checked)"
              class="block">
              {{ severity.label }}
            </mat-checkbox>
          </div>
        </div>

        <!-- Status Filters -->
        <div class="bg-white p-4 rounded-xl shadow-md border border-gray-100">
          <h3 class="text-lg font-bold text-gray-700 mb-3">Estado</h3>
          <div class="space-y-2">
            <mat-checkbox 
              *ngFor="let status of statusOptions" 
              [checked]="isSelected(config.statuses, status.value)"
              (change)="onStatusChange(status.value, $event.checked)"
              class="block">
              {{ status.label }}
            </mat-checkbox>
          </div>
        </div>
      </div>

      <!-- Right Column -->
      <div class="space-y-6">
        <!-- Category Filters -->
        <div class="bg-white p-4 rounded-xl shadow-md border border-gray-100">
          <h3 class="text-lg font-bold text-gray-700 mb-3">Categoría</h3>
          <div class="space-y-2">
            <mat-checkbox 
              *ngFor="let category of categoryOptions" 
              [checked]="isSelected(config.categories, category.value)"
              (change)="onCategoryChange(category.value, $event.checked)"
              class="block">
              {{ category.label }}
            </mat-checkbox>
          </div>
        </div>

        <!-- Resolution Status -->
        <div class="bg-white p-4 rounded-xl shadow-md border border-gray-100">
          <h3 class="text-lg font-bold text-gray-700 mb-3">Estado de Resolución</h3>
          <div class="space-y-2">
            <mat-checkbox [(ngModel)]="config.includeResolved" class="block">
              Incluir Resueltas
            </mat-checkbox>
            <mat-checkbox [(ngModel)]="config.includeUnresolved" class="block">
              Incluir No Resueltas
            </mat-checkbox>
          </div>
        </div>

        <!-- Sort and Group Options -->
        <div class="bg-white p-4 rounded-xl shadow-md border border-gray-100">
          <h3 class="text-lg font-bold text-gray-700 mb-3">Organización</h3>
          <div class="space-y-3">
            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Ordenar por</mat-label>
              <mat-select [(ngModel)]="config.sortBy">
                <mat-option *ngFor="let option of sortOptions" [value]="option.value">
                  {{ option.label }}
                </mat-option>
              </mat-select>
            </mat-form-field>

            <mat-form-field appearance="outline" class="w-full">
              <mat-label>Agrupar por</mat-label>
              <mat-select [(ngModel)]="config.groupBy">
                <mat-option *ngFor="let option of groupOptions" [value]="option.value">
                  {{ option.label }}
                </mat-option>
              </mat-select>
            </mat-form-field>
          </div>
        </div>
      </div>
    </div>

    <!-- Action Buttons -->
    <div class="flex justify-center gap-4 mt-6 pt-4 border-t border-gray-200">
      <button 
        (click)="generateCustomReport()" 
        class="px-8 py-3 rounded-full bg-purple-600 text-white font-bold hover:bg-purple-700 shadow-xl transition-all text-lg transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-purple-500 focus:ring-opacity-70 flex items-center">
        <mat-icon class="mr-2">picture_as_pdf</mat-icon>
        <span>Generar Reporte PDF</span>
      </button>
      
      <button 
        (click)="close()"
        class="px-8 py-3 rounded-full bg-gray-600 text-white font-bold hover:bg-gray-700 shadow-xl transition-all text-lg transform hover:scale-105 focus:outline-none focus:ring-4 focus:ring-gray-500 focus:ring-opacity-70 flex items-center">
        <mat-icon class="mr-2">close</mat-icon>
        <span>Cancelar</span>
      </button>
    </div>
  </div>
</div>
